<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-09-25 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160925" />
    <meta http-equiv="Content-Language" content="en" />
    <title>mithlond-codestyle-appserver-wildfly-v10_1-assembly &#x2013; Wildfly 10 AppServer overlay Assembly</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

                          
        
<link rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" type="text/css"/>
                      
        
<link rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" type="text/css"/>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2><span style="color: #777777;">mithlond-codestyle-appserver-wildfly-v10_1-assembly</span></h2>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2><a href="http://www.mithlond.se">Mithlond</a></h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="projectVersion">Version: 1.8.1
                    </li>
              
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-09-25</li>
            
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://bitbucket.org/lennartj" class="externalLink" title="Bitbucket">
        Bitbucket</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Introduction</a>
          </li>
                              <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../../../poms/mithlond-codestyle-war-parent/index.html" title="mithlond-codestyle-war-parent">
          <span class="none"></span>
        mithlond-codestyle-war-parent</a>
            </li>
                                                                                          <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                  
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-down"></span>
        Project Information</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="integration.html" title="CI Management">
          <span class="none"></span>
        CI Management</a>
            </li>
                    
      <li>
  
                          <a href="dependencies.html" title="Dependencies">
          <span class="none"></span>
        Dependencies</a>
            </li>
                    
      <li>
  
                          <a href="dependency-info.html" title="Dependency Information">
          <span class="none"></span>
        Dependency Information</a>
            </li>
                    
      <li>
  
                          <a href="dependency-management.html" title="Dependency Management">
          <span class="none"></span>
        Dependency Management</a>
            </li>
                    
      <li>
  
                          <a href="distribution-management.html" title="Distribution Management">
          <span class="none"></span>
        Distribution Management</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>About</a>
          </li>
                    
      <li>
  
                          <a href="issue-tracking.html" title="Issue Management">
          <span class="none"></span>
        Issue Management</a>
            </li>
                    
      <li>
  
                          <a href="license.html" title="Licenses">
          <span class="none"></span>
        Licenses</a>
            </li>
                    
      <li>
  
                          <a href="plugin-management.html" title="Plugin Management">
          <span class="none"></span>
        Plugin Management</a>
            </li>
                    
      <li>
  
                          <a href="plugins.html" title="Plugins">
          <span class="none"></span>
        Plugins</a>
            </li>
                    
      <li>
  
                          <a href="team-list.html" title="Team">
          <span class="none"></span>
        Team</a>
            </li>
                    
      <li>
  
                          <a href="source-repository.html" title="Source Code Management">
          <span class="none"></span>
        Source Code Management</a>
            </li>
                    
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <span class="none"></span>
        Summary</a>
            </li>
              </ul>
        </li>
                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Wildfly 10 AppServer overlay Assembly</h1>
<p>Getting the basic infrastructure ready for running on an application server can be a daunting task. This project builds a custom/convenient distribution on top of the WildFly 10 application server, adding 4 things to it:</p>

<ol style="list-style-type: decimal">
  
<li>A suite of standard users, implying that the custom distribution application server can be launched  immediately upon unpacking (provided that a PostgreSQL database is installed on the server; see below).</li>
  
<li>A PostgreSQL module (containing the JDBC driver for PostgreSQL databases)is installed into the  application server. This enables creating connection pools to postgres databases, and the application  server configuration file also contains a PostgreSQL Database pool definition.</li>
  
<li>An EclipseLink module is installed into the application server. This enables the use of EclipseLink instead  of Hibernate as a JPA provider, and also the use of MOXy as a JAXB provider instead of Jackson.</li>
  
<li>A Keycloak Adapter for Wildfly 10 is installed as an Add-On in the application server. This enables installed  WARs to use <a class="externalLink" href="http://www.keycloak.org/index.html">Keycloak</a> as an identity manager or identity broker.</li>
</ol>
<div class="section">
<h2><a name="Build_the_Wildfly_configuration_overlay"></a>Build the Wildfly configuration overlay</h2>
<p>The Wildfly application server requires some configuration before being able to run properly. This configuration is partly found within XML files and partly within the modules subdirectory of the application server. To simplify things, this type of application server configuration is built to an assembly by the project <tt>mithlond-codestyle-appserver-wildfly-v10_0-assembly</tt> (use either tar.gz or zip version as per your own preference):</p>
<p><img src="./images/wildfly_overlay.png" style="margin:10px; border: solid DarkGray 1px;" alt="" /></p>
<p>The overlay should be extracted in the WILDFLY_HOME directory <b>when the server is shut down</b>. Since Wildfly application server re-writes its configuration data when the server is shut down, it will overwrite any configuration written to any of its configuration files when the server is running. Hence the need to unpack the overlay archive when the server is shut down.</p>
<div class="section">
<h3><a name="WildFly_modules_in_separate_layer:_Nazgul"></a>WildFly modules in separate layer: Nazgul</h3>
<p>To separate the modules of the Mithlond Codestyle project from modules shipped within the standard distribution of the WildFly application server, the Mithlond Codestyle overlay places its modules within a separate layer, called <tt>nazgul</tt>. A layer is simply a directory under which JBoss modules are placed; the default layer found in <tt>modules/system/layers/base</tt> is simply called <tt>base</tt>. Hence, should you want to remove the nazgul layer from your application server, simply remove the directory <tt>modules/system/layers/nazgul</tt>.</p>
<p>Note that the <tt>layers.conf</tt> file is the configuration telling WildFly (through JBoss Modules) that the nazgul layer should be used in addition to base. This layers.conf file is built as part of the overlay; the content of the file is simply <tt>layers=nazgul</tt>. The structure within the file system is shown in the image below:</p>
<p><img src="./images/nazgul_layer.png" style="margin:10px; border: solid DarkGray 1px;" alt="" /></p></div>
<div class="section">
<h3><a name="WildFly_modules_in_separate_layer:_Keycloak"></a>WildFly modules in separate layer: Keycloak</h3>
<p>The Keycloak adapter is installed into its own add-on space, named <tt>keycloak</tt>.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                                                          
<script type="text/javascript">SyntaxHighlighter.all()</script>
                          </div>

        
                </div>
    </footer>
        </body>
</html>
