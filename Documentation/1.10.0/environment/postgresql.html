<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-04-22 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170422" />
    <meta http-equiv="Content-Language" content="en" />
    <title>mithlond-codestyle-reactor &#x2013; About PostgreSQL</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
<!-- Add syntax highlighter -->
            <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css"
                  rel="stylesheet"
                  type="text/css" />
            <link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css"
                  rel="stylesheet"
                  type="text/css" />
            <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"
                    type="text/javascript"></script>
            <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js"
                    type="text/javascript"></script>
            <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js"
                    type="text/javascript"></script>
            <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js"
                    type="text/javascript"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2><span style="color: #777777;">mithlond-codestyle-reactor</span></h2>
</div>
</div>
        <div class="pull-right"><div id="bannerRight"><h2><a href="http://www.mithlond.se">Mithlond</a></h2>
</div>
</div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="projectVersion">Version: 1.10.0</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2017-04-22</li>
      <li class="pull-right"><a href="https://travis-ci.org/mithlond/" class="externalLink" title="Mithlond CI">Mithlond CI</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a>  </li>
          <li class="nav-header">Development Setup</li>
    <li><a href="../environment/git_integration.html" title="Git VCS Integration"><span class="none"></span>Git VCS Integration</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>PostgreSQL DB</a>
  </li>
    <li><a href="../environment/wildfly.html" title="WildFly Setup"><span class="none"></span>WildFly Setup</a>  </li>
    <li><a href="../codestyle/index.html" title="IDE Setup"><span class="none"></span>IDE Setup</a>  </li>
          <li class="nav-header">Theory: Scalability</li>
    <li><a href="../theory/modularity.html" title="Modularity"><span class="none"></span>Modularity</a>  </li>
    <li><a href="../theory/software_components.html" title="Software Components"><span class="none"></span>Software Components</a>  </li>
    <li><a href="../theory/complexity_reduction.html" title="Reducing complexity"><span class="none"></span>Reducing complexity</a>  </li>
                  <li class="nav-header">Modules</li>
    <li><a href="../codestyle/index.html" title="mithlond-codestyle"><span class="none"></span>mithlond-codestyle</a>  </li>
    <li><a href="../poms/index.html" title="mithlond-codestyle-poms-reactor"><span class="none"></span>mithlond-codestyle-poms-reactor</a>  </li>
    <li><a href="../appserver/index.html" title="mithlond-codestyle-appserver-reactor"><span class="none"></span>mithlond-codestyle-appserver-reactor</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>About <a class="externalLink" href="http://www.postgres.org">PostgreSQL</a></h1>
<p>Quoting the PostgreSQL site:</p>

<blockquote>
<p>PostgreSQL is a powerful, open source object-relational database system. It has more than 15 years of active development and a proven architecture that has earned it a strong reputation for reliability, data integrity, and correctness. It runs on all major operating systems, including Linux, UNIX (AIX, BSD, HP-UX, SGI IRIX, Mac OS X, Solaris, Tru64), and Windows. It is fully ACID compliant, has full support for foreign keys, joins, views, triggers, and stored procedures (in multiple languages). It includes most SQL:2008 data types, including INTEGER, NUMERIC, BOOLEAN, CHAR, VARCHAR, DATE, INTERVAL, and TIMESTAMP. It also supports storage of binary large objects, including pictures, sounds, or video. It has native programming interfaces for C/C++, Java, .Net, Perl, Python, Ruby, Tcl, ODBC, among others, and exceptional documentation.</p>
</blockquote>
<div class="section">
<h2><a name="Installing_and_setting_up_PostgreSQL"></a>Installing and setting up PostgreSQL</h2>
<p>Installing a PostgreSQL database is simple, and mostly uses a standard installer. For Linux distributions, use the distribution package for PostgreSQL. For Mac and Windows installations, use the installation instructions below.</p>
<div class="section">
<h3><a name="a1._Download_the_PostgreSQL_9.3_installer"></a>1. Download the <a class="externalLink" href="http://www.postgresql.org/download/">PostgreSQL 9.3+ installer</a></h3>
<p>The PostgreSQL installation binary is freely available for download over the net. While the application server does not use any overly advanced features within the database, we should use at least version 9.3 when installing the database.</p></div>
<div class="section">
<h3><a name="a2._Install_PostgreSQL_Configuration_options"></a>2. Install PostgreSQL (Configuration options)</h3>
<p>The PostgreSQL installer is fairly straightforward, but needs 2 non-standard choices which are apparent during the installation:</p>

<ol style="list-style-type: decimal">
  
<li><b>Service</b>. The PostgreSQL database listener should be installed as a service on your computer.  This requires that you define a database account username (&#x201c;postgres&#x201d;) and password (&#x201c;postgres&#x201d;).  Accept the request to create the operating system account, if asked for it.</li>
  
<li><b>Encoding</b>. When asked to &#x201c;initialize database&#x201d; during the installation select the Server  Encoding <b>UTF-8</b>. This is important to correctly handle search and text encodings.</li>
</ol></div>
<div class="section">
<h3><a name="a3._Create_two_required_PostgreSQL_roles_Database_Users"></a>3. Create two required PostgreSQL roles (&#x201c;Database Users&#x201d;)</h3>
<p>It is not recommended to use the database superuser directly from an application server. Instead, a new database role should be created and given privileges to own the database used by the application server. (In newer PG versions, the somewhat confusing term &#x201c;role&#x201d; is an account that can be a &#x201c;user&#x201d; or &#x201c;group&#x201d;).</p>
<p>Launch the PgAdmin III graphical client (or the text console psql tool) and login as the superuser <tt>postgresql</tt>. When logged in as the superuser, create the required database users <tt>mithlonduser</tt> and <tt>keycloakuser</tt> by firing the following SQL:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">begin;

CREATE ROLE &quot;wildflyuser&quot; LOGIN
    ENCRYPTED PASSWORD 'md585a23914551c4146ea6469ef2be1e5a3'
    NOSUPERUSER INHERIT CREATEDB NOCREATEROLE NOREPLICATION;
COMMENT ON ROLE &quot;wildflyuser&quot; IS 'WildFly Appserver DB Pool User';

CREATE ROLE &quot;mithlonduser&quot; LOGIN
    ENCRYPTED PASSWORD 'md5dc095cc48f407588977c1ae83694342c'
    NOSUPERUSER NOINHERIT CREATEDB NOCREATEROLE NOREPLICATION;
COMMENT ON ROLE &quot;mithlonduser&quot; IS 'Mithlond DB Pool User';

commit;
</pre></div></div>
<p>You should now have two new database roles in the development database. Their respective purpose and access credentials are as follows:</p>

<table border="0" class="table table-striped">
    
<tr class="a">
        
<th>Role</th>
        
<th>Password (Development Environment DB)</th>
        
<th>Purpose</th>
    </tr>
    
<tr class="b">
        
<td>mithlonduser</td>
        
<td>MordorRules</td>
        
<td>DB role for accessing application data.</td>
    </tr>
    
<tr class="a">
        
<td>wildflyuser</td>
        
<td>MuscaCacavit</td>
        
<td>DB role for application server default storage.</td>
    </tr>
</table></div>
<div class="section">
<h3><a name="a4._As_postgres_user_create_the_databases_MithlondDB_and_WildflyDB"></a>4. As &#x201c;postgres&#x201d; user, create the databases &#x201c;MithlondDB&#x201d; and &#x201c;WildflyDB&#x201d;</h3>
<p>While still being logged in to the PostgreSQL database as the &#x201c;postgres&#x201d; user, create the service databases for the mithlond and keycloak services using the following commands in order:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">CREATE DATABASE &quot;ServiceDB&quot;
      WITH OWNER = mithlonduser
           ENCODING = 'UTF8'
           TABLESPACE = pg_default
           LC_COLLATE = 'sv_SE.UTF-8'
           LC_CTYPE = 'sv_SE.UTF-8'
           CONNECTION LIMIT = -1;

COMMENT ON DATABASE &quot;ServiceDB&quot; IS 'Service persistence DB';

CREATE DATABASE &quot;WildflyDB&quot;
      WITH OWNER &quot;wildflyuser&quot;
           ENCODING = 'UTF8'
           TABLESPACE = pg_default
           LC_COLLATE = 'sv_SE.UTF-8'
           LC_CTYPE = 'sv_SE.UTF-8'
           CONNECTION LIMIT = -1;

COMMENT ON DATABASE &quot;WildflyDB&quot; IS 'Wildfly Appserver Default DB';
</pre></div></div>
<p>Use the PgAdmin III tool to verify that the databases are created:</p>
<p><img src="../images/service_databases.png" style="margin:10px; border:1px solid black;" alt="" /></p></div>
<div class="section">
<h3><a name="All_Done."></a>All Done.</h3>
<p>Database users and Databases are now set up; you can log out from the PostgreSQL database.</p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<!-- Launch the syntax highlighter. -->
            <script type="text/javascript">
                SyntaxHighlighter.all()
            </script>
        </div>
        </div>
    </footer>
    </body>
</html>
